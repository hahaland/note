## xss攻击（跨站脚本攻击）

### 反射型

在url参数中带上恶意代码，对应网站没有处理url参数就会执行恶意代码（比如在html中加入自己的脚本）。通常是给一个网页链接，通过诱导用户交互发送get请求，跳转到目标页面，此时网页已经带有恶意代码

### 存储型

网页中的表单输入被服务器长期储存且返回在网页中，会攻击所有访问当前网页的用户。

> 反射性和存储型都是服务器返回的html文本被嵌入了代码

### DOM型
前端的js代码没有对不可信的数据处理直接执行

> XSS攻击一般都是通过闭合标签，来插入script标签或者js脚本，也能往通过css的expression来执行恶意代码

### 解决方法：
  - 对表单输入进行过滤（比如转义库处理html标签，过滤javascript://），而且应该在页面显示时过滤
  - 避免拼接 HTML：使用vue/react时避免使用v-html/dangerouslySetInnerHTML
  - dom中的内联事件（如location、onclick、onerror等） ，js中的eval等方法会把字符串解析成代码，需要注意这些地方的数据传递
  - 通过CSP、输入长度、接口安全措施等方法增加攻击难度
  - 使用XSS攻击扫描工具检测漏洞

### 注意事项
  - 前端需要防范dom型的xss攻击，前两种因为可以伪造请求，在前端过滤没有意义
  - 不同上下文要用不同的转义方法

## CSRF

### 方法

- token: 在请求头添加token(伪随机数)，token可以通过公钥私钥的方式生成。
- 验证码
- cookie的samesite属性，有strict、lax、none，strict：跨站点时只有当前网页url与请求完全一致才会带上cookie；lax，除了跳转连接、预加载、get表单之外都不会带cookie

## 网络劫持
### 注入型
运营商在网页中插入代码
### 跳转型
解析网站时返回自己想要用户访问的网站

### 解决方法
- https
- 注入类，可以重写document.write、修改dom的方法，增加拦截器

## hybrid安全